module.exports=function(c,g){function p(a,b){return e.allBools&&/^--[^=]+$/.test(b)||e.strings[a]||e.bools[a]||m[a]}function k(a,b,d){if(!d||!e.unknownFn||p(a,d)||!1!==e.unknownFn(d)){var c=!e.strings[a]&&isNumber(b)?Number(b):b;r(n,a.split("."),c);(m[a]||[]).forEach(function(a){r(n,a.split("."),c)})}}function r(a,b,d){var c=a;b.slice(0,-1).forEach(function(a){void 0===c[a]&&(c[a]={});c=c[a]});a=b[b.length-1];void 0===c[a]||e.bools[a]||"boolean"===typeof c[a]?c[a]=d:Array.isArray(c[a])?c[a].push(d):
c[a]=[c[a],d]}function v(a){return m[a].some(function(a){return e.bools[a]})}g||(g={});var e={bools:{},strings:{},unknownFn:null};"function"===typeof g.unknown&&(e.unknownFn=g.unknown);"boolean"===typeof g["boolean"]&&g["boolean"]?e.allBools=!0:[].concat(g["boolean"]).filter(Boolean).forEach(function(a){e.bools[a]=!0});var m={};Object.keys(g.alias||{}).forEach(function(a){m[a]=[].concat(g.alias[a]);m[a].forEach(function(b){m[b]=[a].concat(m[a].filter(function(a){return b!==a}))})});[].concat(g.string).filter(Boolean).forEach(function(a){e.strings[a]=
!0;m[a]&&(e.strings[m[a]]=!0)});var q=g["default"]||{},n={_:[]};Object.keys(e.bools).forEach(function(a){k(a,void 0===q[a]?!1:q[a])});var u=[];-1!==c.indexOf("--")&&(u=c.slice(c.indexOf("--")+1),c=c.slice(0,c.indexOf("--")));for(var h=0;h<c.length;h++){var d=c[h];if(/^--.+=/.test(d)){var f=d.match(/^--([^=]+)=([\s\S]*)$/),b=f[1];f=f[2];e.bools[b]&&(f="false"!==f);k(b,f,d)}else if(/^--no-.+/.test(d))b=d.match(/^--no-(.+)/)[1],k(b,!1,d);else if(/^--.+/.test(d))b=d.match(/^--(.+)/)[1],f=c[h+1],void 0===
f||/^-/.test(f)||e.bools[b]||e.allBools||m[b]&&v(b)?/^(true|false)$/.test(f)?(k(b,"true"===f,d),h++):k(b,e.strings[b]?"":!0,d):(k(b,f,d),h++);else if(/^-[^-]+/.test(d)){b=d.slice(1,-1).split("");for(var t=!1,l=0;l<b.length;l++)if(f=d.slice(l+2),"-"===f)k(b[l],f,d);else{if(/[A-Za-z]/.test(b[l])&&/=/.test(f)){k(b[l],f.split("=")[1],d);t=!0;break}if(/[A-Za-z]/.test(b[l])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(f)){k(b[l],f,d);t=!0;break}if(b[l+1]&&b[l+1].match(/\W/)){k(b[l],d.slice(l+2),d);t=!0;break}else k(b[l],
e.strings[b[l]]?"":!0,d)}b=d.slice(-1)[0];t||"-"===b||(!c[h+1]||/^(-|--)[^-]/.test(c[h+1])||e.bools[b]||m[b]&&v(b)?c[h+1]&&/true|false/.test(c[h+1])?(k(b,"true"===c[h+1],d),h++):k(b,e.strings[b]?"":!0,d):(k(b,c[h+1],d),h++))}else if(e.unknownFn&&!1===e.unknownFn(d)||n._.push(e.strings._||!isNumber(d)?d:Number(d)),g.stopEarly){n._.push.apply(n._,c.slice(h+1));break}}Object.keys(q).forEach(function(a){hasKey(n,a.split("."))||(r(n,a.split("."),q[a]),(m[a]||[]).forEach(function(b){r(n,b.split("."),q[a])}))});
g["--"]?(n["--"]=[],u.forEach(function(a){n["--"].push(a)})):u.forEach(function(a){n._.push(a)});return n};function hasKey(c,g){var p=c;g.slice(0,-1).forEach(function(c){p=p[c]||{}});return g[g.length-1]in p}function isNumber(c){return"number"===typeof c||/^0x[0-9a-f]+$/i.test(c)?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(c)};